{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState, useRef } from 'react';\nimport arrow from 'assets/images/arrow.svg';\nimport { useRouter } from 'next/router';\nimport { isMobileOnly } from 'react-device-detect';\nimport useOutsideClick from 'components/Dashboard/util/useOutsideClick';\nimport * as d3 from 'd3';\n\nconst dropdown = ({\n  filter,\n  type,\n  checked,\n  district,\n  SET_IS_RANK,\n  SET_SELECTED_INDEX,\n  SET_SELECTED_TOOLTIP,\n  SET_STATE_DROPDOWN,\n  SET_CHECKED,\n  SET_DISTRICT\n}) => {\n  const {\n    0: dropdown_state,\n    1: SET_DROPDOWN_STATE\n  } = useState(false);\n  const {\n    0: category,\n    1: SET_CATEGORY\n  } = useState('น้ำท่วมถนน');\n  const router = useRouter();\n\n  const showMenu = e => {\n    SET_DROPDOWN_STATE(true);\n  };\n\n  const closeMenu = e => {\n    if (dropdown_state && e.target.id != 'options') {\n      SET_DROPDOWN_STATE(false);\n      document.removeEventListener('click', closeMenu);\n    }\n  };\n\n  const handleOptionChange = e => {\n    SET_STATE_DROPDOWN(type);\n\n    if (type === 'group') {\n      d3.selectAll(`.minimap`).style('fill', 'none');\n      SET_CHECKED(e.target.value);\n      SET_DISTRICT(null);\n    } else if (type === 'zone') {\n      SET_DISTRICT(e.target.value);\n      setTimeout(() => {\n        d3.select(`.rect${e.target.value}`).style('stroke-width', 1).style('stroke', 'white');\n        d3.select(`.minimap${e.target.value}`).style('fill', 'white');\n        d3.select(`.tooltip${e.target.value}`).style('visibility', 'visible');\n      }, 100);\n    }\n\n    SET_DROPDOWN_STATE(false);\n    SET_IS_RANK(false);\n    document.removeEventListener('click', closeMenu);\n  };\n\n  setTimeout(() => {\n    SET_CATEGORY(router.query.title);\n  }, 0);\n\n  const handleCategory = e => {\n    router.push('/dashboard/' + e.target.value);\n    SET_SELECTED_INDEX(0);\n    SET_SELECTED_TOOLTIP();\n    SET_STATE_DROPDOWN(null);\n    SET_CHECKED('เขตพื้นที่ทั้งหมด');\n    SET_DISTRICT(null);\n    SET_CATEGORY(e.target.value);\n    SET_DROPDOWN_STATE(false);\n    document.removeEventListener('click', closeMenu);\n  };\n\n  const ref = useRef();\n  useOutsideClick(ref, () => {\n    if (dropdown_state) {\n      SET_DROPDOWN_STATE(false);\n    }\n  });\n  return /*#__PURE__*/_jsxs(\"div\", {\n    style: {\n      width: isMobileOnly ? '100%' : '',\n      maxWidth: isMobileOnly && type != 'category' ? '50%' : ''\n    },\n    children: [type === 'group' ? /*#__PURE__*/_jsxs(\"div\", {\n      id: \"dropdown\",\n      className: \"relative inline-block w-full text-left md:ml-3\",\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        onClick: dropdown_state ? closeMenu : showMenu,\n        id: \"manu\",\n        className: \"relative flex flex-row p-2 font-bold rounded cursor-pointer md:w-56 bg-white-default h4 \",\n        children: [checked === 'เขตพื้นที่ทั้งหมด' ? /*#__PURE__*/_jsx(\"p\", {\n          children: \"\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E01\\u0E25\\u0E38\\u0E48\\u0E21\\u0E1E\\u0E37\\u0E49\\u0E19\\u0E17\\u0E35\\u0E48 \"\n        }) : /*#__PURE__*/_jsx(\"p\", {\n          className: \"truncate ...\",\n          style: {\n            width: isMobileOnly ? '60%' : '80%'\n          },\n          children: checked\n        }), /*#__PURE__*/_jsx(\"div\", {\n          id: \"arrow-wrpper\",\n          className: \"absolute right-0 flex justify-center pr-3\",\n          style: {\n            top: '50%',\n            transform: 'translateY(-50%)'\n          },\n          children: dropdown_state ? /*#__PURE__*/_jsx(\"img\", {\n            src: arrow,\n            alt: \"arrow\",\n            className: \"transform rotate-180\"\n          }) : /*#__PURE__*/_jsx(\"img\", {\n            src: arrow,\n            alt: \"arrow\"\n          })\n        })]\n      }), dropdown_state ? /*#__PURE__*/_jsx(\"div\", {\n        className: \"absolute bottom-auto z-20 flex flex-col w-full p-3 mt-1 rounded bg-white-default\",\n        style: {\n          border: '1px solid #eee',\n          boxShadow: '0px 8px 16px rgba(0, 0, 0, 0.15)'\n        },\n        id: \"options\",\n        ref: ref,\n        children: filter.map((f, index) => /*#__PURE__*/_jsxs(\"label\", {\n          className: \"flex flex-row p-2 my-1 check\",\n          id: \"options\",\n          children: [/*#__PURE__*/_jsxs(\"span\", {\n            className: \"flex pointer-events-none pl-7\",\n            children: [isMobileOnly ? '' : /*#__PURE__*/_jsx(\"img\", {\n              src: f.img,\n              alt: \"icon-dropdown\",\n              className: \"mr-3\"\n            }), /*#__PURE__*/_jsx(\"p\", {\n              className: \" p1\",\n              children: f.filter_by\n            })]\n          }), /*#__PURE__*/_jsx(\"input\", {\n            type: \"radio\",\n            id: \"options\",\n            value: f.filter_by,\n            checked: checked === f.filter_by,\n            onChange: handleOptionChange\n          }), /*#__PURE__*/_jsx(\"span\", {\n            className: \"ml-2 pointer-events-none checkmark\"\n          })]\n        }, index))\n      }) : null]\n    }) : null, type === 'zone' ? /*#__PURE__*/_jsxs(\"div\", {\n      id: \"dropdown\",\n      className: \"relative inline-block w-full pl-3 text-left md:ml-3\",\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        onClick: dropdown_state ? closeMenu : showMenu,\n        id: \"manu\",\n        className: \"relative flex flex-row p-2 font-bold rounded cursor-pointer md:w-56 bg-white-default h4\",\n        children: [district === null ? /*#__PURE__*/_jsx(\"p\", {\n          children: \"\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E40\\u0E02\\u0E15 \"\n        }) : district, /*#__PURE__*/_jsx(\"div\", {\n          id: \"arrow-wrpper\",\n          className: \"absolute right-0 flex justify-center pr-3\",\n          style: {\n            top: '50%',\n            transform: 'translateY(-50%)'\n          },\n          children: dropdown_state ? /*#__PURE__*/_jsx(\"img\", {\n            src: arrow,\n            alt: \"arrow\",\n            className: \"transform rotate-180\"\n          }) : /*#__PURE__*/_jsx(\"img\", {\n            src: arrow,\n            alt: \"arrow\"\n          })\n        })]\n      }), dropdown_state ? /*#__PURE__*/_jsx(\"div\", {\n        className: \"absolute bottom-auto z-50 flex flex-col w-full p-3 mt-1 overflow-hidden rounded bg-white-default\",\n        style: {\n          border: '1px solid #eee',\n          boxShadow: '0px 8px 16px rgba(0, 0, 0, 0.15)',\n          maxHeight: '50vh'\n        },\n        ref: ref,\n        id: \"options\",\n        children: /*#__PURE__*/_jsx(\"div\", {\n          id: \"option-wrapper \",\n          className: \"overflow-auto\",\n          children: filter.map((f, index) => /*#__PURE__*/_jsxs(\"label\", {\n            className: \"flex flex-row p-2 my-1 check\",\n            id: \"options\",\n            children: [/*#__PURE__*/_jsx(\"p\", {\n              className: \"pointer-events-none pl-7 p1 truncate ...\",\n              children: f.filter_by\n            }), /*#__PURE__*/_jsx(\"input\", {\n              type: \"radio\",\n              id: \"options\",\n              value: f.filter_by,\n              checked: district === f.filter_by,\n              onChange: handleOptionChange\n            }), /*#__PURE__*/_jsx(\"span\", {\n              className: \"ml-2 pointer-events-none checkmark\"\n            })]\n          }, index))\n        })\n      }) : null]\n    }) : null, type === 'category' ? /*#__PURE__*/_jsxs(\"div\", {\n      id: \"dropdown\",\n      className: \"relative inline-block mb-2 text-left md:mb-0\",\n      style: {\n        width: isMobileOnly ? '100%' : ''\n      },\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        onClick: dropdown_state ? closeMenu : showMenu,\n        id: \"manu\",\n        className: \"relative flex flex-row p-2 mx-3 font-bold rounded cursor-pointer md:w-52 bg-white-default h4 md:mx-0\",\n        children: [/*#__PURE__*/_jsx(\"p\", {\n          className: \"truncate ...\",\n          style: {\n            width: isMobileOnly ? '60%' : '80%'\n          },\n          children: category\n        }), /*#__PURE__*/_jsx(\"div\", {\n          id: \"arrow-wrpper\",\n          className: \"absolute right-0 flex justify-center pr-3\",\n          style: {\n            top: '50%',\n            transform: 'translateY(-50%)'\n          },\n          children: dropdown_state ? /*#__PURE__*/_jsx(\"img\", {\n            src: arrow,\n            alt: \"arrow\",\n            className: \"transform rotate-180\"\n          }) : /*#__PURE__*/_jsx(\"img\", {\n            src: arrow,\n            alt: \"arrow\"\n          })\n        })]\n      }), dropdown_state ? /*#__PURE__*/_jsx(\"div\", {\n        className: \"absolute bottom-auto z-50 flex flex-col w-full p-3 mt-1 rounded bg-white-default\",\n        style: {\n          border: '1px solid #eee',\n          boxShadow: '0px 8px 16px rgba(0, 0, 0, 0.15)'\n        },\n        id: \"options\",\n        ref: ref,\n        children: filter.map((f, index) => /*#__PURE__*/_jsxs(\"label\", {\n          className: \"flex flex-row p-2 my-1 check\",\n          id: \"options\",\n          children: [/*#__PURE__*/_jsx(\"span\", {\n            className: \"flex pointer-events-none pl-7\",\n            children: /*#__PURE__*/_jsx(\"p\", {\n              className: \" p1\",\n              children: f.name\n            })\n          }), /*#__PURE__*/_jsx(\"input\", {\n            type: \"radio\",\n            id: \"options\",\n            value: f.name,\n            checked: category === f.name,\n            onChange: handleCategory\n          }), /*#__PURE__*/_jsx(\"span\", {\n            className: \"ml-2 pointer-events-none checkmark\"\n          })]\n        }, index))\n      }) : null]\n    }) : null]\n  });\n};\n\nexport default dropdown;","map":null,"metadata":{},"sourceType":"module"}